
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mica.archive.aca_dark &#8212; mica 4.21.3.dev26+g8fbfc7e documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Starcheck products" href="starcheck.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">Ska!</span><span id="logotext2">mi</span><span id="logotext3">ca</span></a>
  <ul>
    
    <li><a class="home" title="Homepage" href="">
        <span id="logotext1"></span><span id="logotext2"></span>
    </a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="starcheck.html" title="Starcheck products">
	  &laquo; previous
	</a>
	
      </li>
      <li>
	<a href="index.html">mica 4.21.3.dev26+g8fbfc7e documentation</a>
	 &#187;
      </li>
      
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_dark</span></code></li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mica-archive-aca-dark">
<span id="api-aca-dark"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_dark</span></code><a class="headerlink" href="#mica-archive-aca-dark" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-mica.archive.aca_dark.dark_cal">
<span id="mica-archive-aca-dark-dark-cal"></span><span id="api-dark-cal"></span><h2><a class="reference internal" href="#module-mica.archive.aca_dark.dark_cal" title="mica.archive.aca_dark.dark_cal"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_dark.dark_cal</span></code></a><a class="headerlink" href="#module-mica.archive.aca_dark.dark_cal" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.dark_id_to_date">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">dark_id_to_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dark_id</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#dark_id_to_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.dark_id_to_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert <code class="docutils literal notranslate"><span class="pre">dark_id</span></code> (YYYYDOY) to the corresponding DateTime ‘date’ format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – dark id (YYYYDOY)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str in DateTime ‘date’ format</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.date_to_dark_id">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">date_to_dark_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#date_to_dark_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.date_to_dark_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert <code class="docutils literal notranslate"><span class="pre">date</span></code> to the corresponding YYYYDOY format for a dark cal identifiers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – any DateTime compatible format</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dark id (YYYYDOY)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.get_dark_cal_dirs">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">get_dark_cal_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dark_cals_dir</span><span class="o">=</span><span class="default_value">'/Users/javierg/SAO/ska/data/mica/archive/aca_dark'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#get_dark_cal_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.get_dark_cal_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an ordered dict of directory paths containing dark current calibration files,
where the key is the dark cal identifier (YYYYDOY) and the value is the path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> – source of dark cal directories (‘mica’|’ska’)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ordered dict of absolute directory paths</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.get_dark_cal_id">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">get_dark_cal_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">select</span><span class="o">=</span><span class="default_value">'before'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#get_dark_cal_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.get_dark_cal_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dark calibration id corresponding to <code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">select</span></code> is <code class="docutils literal notranslate"><span class="pre">'before'</span></code> (default) then use the first calibration which
occurs before <code class="docutils literal notranslate"><span class="pre">date</span></code>.  Other valid options are <code class="docutils literal notranslate"><span class="pre">'after'</span></code> and <code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – date in any DateTime format</p></li>
<li><p><strong>select</strong> – method to select dark cal (before|nearest|after)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dark cal id string (YYYYDOY)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.get_dark_cal_image">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">get_dark_cal_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">select</span><span class="o">=</span><span class="default_value">'before'</span></em>, <em class="sig-param"><span class="n">t_ccd_ref</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aca_image</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">allow_negative</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#get_dark_cal_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.get_dark_cal_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dark calibration image (e-/s) nearest to <code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">select</span></code> is <code class="docutils literal notranslate"><span class="pre">'before'</span></code> (default) then use the first calibration which
occurs before <code class="docutils literal notranslate"><span class="pre">date</span></code>.  Other valid options are <code class="docutils literal notranslate"><span class="pre">'after'</span></code> and <code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – date in any DateTime format</p></li>
<li><p><strong>select</strong> – method to select dark cal (before|nearest|after)</p></li>
<li><p><strong>t_ccd_ref</strong> – rescale dark map to temperature (degC, default=no scaling)</p></li>
<li><p><strong>aca_image</strong> – return an ACAImage instance instead of ndarray</p></li>
<li><p><strong>allow_negative</strong> – allow negative values in raw dark map (default=False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1024 x 1024 ndarray with dark cal image in e-/s</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.get_dark_cal_props">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">get_dark_cal_props</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">select</span><span class="o">=</span><span class="default_value">'before'</span></em>, <em class="sig-param"><span class="n">include_image</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">t_ccd_ref</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aca_image</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">allow_negative</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#get_dark_cal_props"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.get_dark_cal_props" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dark calibration properties structure for <code class="docutils literal notranslate"><span class="pre">date</span></code></p>
<p>If <code class="docutils literal notranslate"><span class="pre">select</span></code> is <code class="docutils literal notranslate"><span class="pre">'before'</span></code> (default) then use the first calibration which
occurs before <code class="docutils literal notranslate"><span class="pre">date</span></code>.  Other valid options are <code class="docutils literal notranslate"><span class="pre">'after'</span></code> and <code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">include_image</span></code> is True then an additional column or key <code class="docutils literal notranslate"><span class="pre">image</span></code> is
defined which contains the corresponding 1024x1024 dark cal image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – date in any DateTime format</p></li>
<li><p><strong>select</strong> – method to select dark cal (before|nearest|after)</p></li>
<li><p><strong>include_image</strong> – include the dark cal images in output (default=False)</p></li>
<li><p><strong>t_ccd_ref</strong> – rescale dark map to temperature (degC, default=no scaling)</p></li>
<li><p><strong>aca_image</strong> – return an ACAImage instance instead of ndarray</p></li>
<li><p><strong>allow_negative</strong> – allow negative values in raw dark map (default=False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of dark calibration properties</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_dark.dark_cal.get_dark_cal_props_table">
<code class="sig-prename descclassname">mica.archive.aca_dark.dark_cal.</code><code class="sig-name descname">get_dark_cal_props_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">include_image</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">as_table</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_dark/dark_cal.html#get_dark_cal_props_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_dark.dark_cal.get_dark_cal_props_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a table of dark calibration properties between <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">include_image</span></code> is True then an additional column or key <code class="docutils literal notranslate"><span class="pre">image</span></code> is
defined which contains the corresponding 1024x1024 dark cal image.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">as_table</span></code> is True (default) then the result is an astropy Table object.
If False then a list of dicts is returned.  In this case the full contents
of the properties file including replica properties is available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – start time (default=beginning of mission)</p></li>
<li><p><strong>stop</strong> – stop time (default=now)</p></li>
<li><p><strong>include_image</strong> – include the dark cal images in output (default=False)</p></li>
<li><p><strong>as_table</strong> – return a Table instead of a list (default=True)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>astropy Table or list of dark calibration properties</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.archive.aca_hdr3">
<span id="mica-archive-aca-hdr3"></span><h1><a class="reference internal" href="#module-mica.archive.aca_hdr3" title="mica.archive.aca_hdr3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_hdr3</span></code></a><a class="headerlink" href="#module-mica.archive.aca_hdr3" title="Permalink to this headline">¶</a></h1>
<p>Experimental/alpha code to work with ACA L0 Header 3 data</p>
<dl class="py class">
<dt id="mica.archive.aca_hdr3.MSID">
<em class="property">class </em><code class="sig-prename descclassname">mica.archive.aca_hdr3.</code><code class="sig-name descname">MSID</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msid</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">msid_data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filter_bad</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_hdr3.html#MSID"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_hdr3.MSID" title="Permalink to this definition">¶</a></dt>
<dd><p>ACA header 3 data object to work with header 3 data from
available 8x8 ACA L0 telemetry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">aca_hdr3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd_temp</span> <span class="o">=</span> <span class="n">aca_hdr3</span><span class="o">.</span><span class="n">MSID</span><span class="p">(</span><span class="s1">&#39;ccd_temp&#39;</span><span class="p">,</span> <span class="s1">&#39;2012:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2012:020&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">ccd_temp</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span>
<span class="go">&#39;numpy.ma.core.MaskedArray&#39;</span>
</pre></div>
</div>
<p>When given an <code class="docutils literal notranslate"><span class="pre">msid</span></code> and <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> range, the object will
query the ACA L0 archive to populate the object, which includes the MSID
values (<code class="docutils literal notranslate"><span class="pre">vals</span></code>) at the given times (<code class="docutils literal notranslate"><span class="pre">times</span></code>).</p>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">msid_data</span></code> is used to create an MSID object from
the data of another MSID object.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">filter_bad</span></code> is supplied then only valid data values are stored
and the <code class="docutils literal notranslate"><span class="pre">vals</span></code> and <code class="docutils literal notranslate"><span class="pre">times</span></code> attributes are <cite>np.ndarray</cite> instead of
<cite>ma.MaskedArray</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msid</strong> – MSID name</p></li>
<li><p><strong>start</strong> – Chandra.Time compatible start time</p></li>
<li><p><strong>stop</strong> – Chandra.Time compatible stop time</p></li>
<li><p><strong>msid_data</strong> – data dictionary or object from another MSID object</p></li>
<li><p><strong>filter_bad</strong> – remove missing values</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mica.archive.aca_hdr3.MSID.filter_bad">
<code class="sig-name descname">filter_bad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">copy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_hdr3.html#MSID.filter_bad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_hdr3.MSID.filter_bad" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter out any missing values.</p>
<p>After applying this method the <code class="docutils literal notranslate"><span class="pre">vals</span></code> attributes will be a
plain np.ndarray object instead of a masked array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>copy</strong> – return a copy of MSID object with bad values filtered</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mica.archive.aca_hdr3.MSIDset">
<em class="property">class </em><code class="sig-prename descclassname">mica.archive.aca_hdr3.</code><code class="sig-name descname">MSIDset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msids</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_hdr3.html#MSIDset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_hdr3.MSIDset" title="Permalink to this definition">¶</a></dt>
<dd><p>ACA header 3 data object to work with header 3 data from
available 8x8 ACA L0 telemetry.  An MSIDset works with multiple
MSIDs simultaneously.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">aca_hdr3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">perigee_data</span> <span class="o">=</span> <span class="n">aca_hdr3</span><span class="o">.</span><span class="n">MSIDset</span><span class="p">([</span><span class="s1">&#39;ccd_temp&#39;</span><span class="p">,</span> <span class="s1">&#39;aca_temp&#39;</span><span class="p">,</span> <span class="s1">&#39;dac&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                <span class="s1">&#39;2012:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2012:030&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msids</strong> – list of MSIDs</p></li>
<li><p><strong>start</strong> – Chandra.Time compatible start time</p></li>
<li><p><strong>stop</strong> – Chandra.Time compatible stop time</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mica.archive.aca_l0">
<span id="mica-archive-aca-l0"></span><h1><a class="reference internal" href="#module-mica.archive.aca_l0" title="mica.archive.aca_l0"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_l0</span></code></a><a class="headerlink" href="#module-mica.archive.aca_l0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.archive.aca_l0.get_slot_data">
<code class="sig-prename descclassname">mica.archive.aca_l0.</code><code class="sig-name descname">get_slot_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">slot</span></em>, <em class="sig-param"><span class="n">imgsize</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_root</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">columns</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_l0.html#get_slot_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_l0.get_slot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>For a the given parameters, retrieve telemetry and construct a
masked array of the MSIDs available in that telemetry.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">aca_l0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">slot_data</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_slot_data</span><span class="p">(</span><span class="s1">&#39;2012:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2012:002&#39;</span><span class="p">,</span> <span class="n">slot</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temp_ccd_8x8</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_slot_data</span><span class="p">(</span><span class="s1">&#39;2005:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2005:010&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">slot</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">imgsize</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
<span class="gp">... </span>                                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;TIME&#39;</span><span class="p">,</span> <span class="s1">&#39;TEMPCCD&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – start time of requested interval</p></li>
<li><p><strong>stop</strong> – stop time of requested interval</p></li>
<li><p><strong>slot</strong> – slot number integer (in the range 0 -&gt; 7)</p></li>
<li><p><strong>imgsize</strong> – list of integers of desired image sizes
(defaults to all -&gt; [4, 6, 8])</p></li>
<li><p><strong>db</strong> – handle to archive lookup table</p></li>
<li><p><strong>data_root</strong> – parent directory that contains archfiles.db3
(for use when db handle not available)</p></li>
<li><p><strong>columns</strong> – list of desired columns in the ACA0 telemetry
(defaults to all in 8x8 telemetry)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data structure for slot</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy masked recarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_l0.get_files">
<code class="sig-prename descclassname">mica.archive.aca_l0.</code><code class="sig-name descname">get_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">slots</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">imgsize</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_root</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_l0.html#get_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_l0.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve list of files from ACA0 archive lookup table that
match arguments.  The database query returns files with</p>
<blockquote>
<div><p>tstart &lt; stop
and
tstop &gt; start</p>
</div></blockquote>
<p>which returns all files that contain any part of the interval
between start and stop.  If the obsid argument is provided, the
archived obspar tstart/tstop (sybase aca.obspar table) are used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">aca_l0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obsid_files</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">obsid</span><span class="o">=</span><span class="mi">5438</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_files</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2012:001&#39;</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="s1">&#39;2012:002&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_8x8</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2011:001&#39;</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="s1">&#39;2011:010&#39;</span><span class="p">,</span>
<span class="gp">... </span>                            <span class="n">imgsize</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>start</strong> – start time of requested interval</p></li>
<li><p><strong>stop</strong> – stop time of requested interval</p></li>
<li><p><strong>slots</strong> – list of integers of desired image slots to retrieve
(defaults to all -&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8])</p></li>
<li><p><strong>imgsize</strong> – list of integers of desired image sizes
(defaults to all -&gt; [4, 6, 8])</p></li>
<li><p><strong>db</strong> – handle to archive lookup table</p></li>
<li><p><strong>data_root</strong> – parent directory of Ska aca l0 archive</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>interval files</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.aca_l0.get_l0_images">
<code class="sig-prename descclassname">mica.archive.aca_l0.</code><code class="sig-name descname">get_l0_images</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">slot</span></em>, <em class="sig-param"><span class="n">imgsize</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">columns</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/aca_l0.html#get_l0_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.aca_l0.get_l0_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ACA L0 images for the given  <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> times and
the given <code class="docutils literal notranslate"><span class="pre">slot</span></code>.  Optionally filter on image size via <code class="docutils literal notranslate"><span class="pre">imgsize</span></code>
or change the default image metadata via <code class="docutils literal notranslate"><span class="pre">columns</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">aca_l0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imgs</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_l0_images</span><span class="p">(</span><span class="s1">&#39;2012:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2012:002&#39;</span><span class="p">,</span> <span class="n">slot</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imgs</span> <span class="o">=</span> <span class="n">aca_l0</span><span class="o">.</span><span class="n">get_l0_images</span><span class="p">(</span><span class="s1">&#39;2005:001&#39;</span><span class="p">,</span> <span class="s1">&#39;2005:002&#39;</span><span class="p">,</span> <span class="n">slot</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">imgsize</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
</pre></div>
</div>
<p>The default columns are:
[‘TIME’, ‘IMGROW0’, ‘IMGCOL0’, ‘BGDAVG’, ‘IMGSTAT’, ‘IMGFUNC1’, ‘IMGSIZE’, ‘IMGSCALE’, ‘INTEG’]</p>
<p>The image pixel values are given in units of DN.  One can convert to e-/sec
by multiplying by (5 / INTEG).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – start time of requested interval</p></li>
<li><p><strong>stop</strong> – stop time of requested interval</p></li>
<li><p><strong>slot</strong> – slot number integer (in the range 0 -&gt; 7)</p></li>
<li><p><strong>imgsize</strong> – list of integers of desired image sizes (default=[4, 6, 8])</p></li>
<li><p><strong>columns</strong> – image meta-data columns</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of ACAImage objects</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.archive.asp_l1">
<span id="mica-archive-asp-l1"></span><h1><a class="reference internal" href="#module-mica.archive.asp_l1" title="mica.archive.asp_l1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.asp_l1</span></code></a><a class="headerlink" href="#module-mica.archive.asp_l1" title="Permalink to this headline">¶</a></h1>
<p>Script to update Ska file archive aspect L1 products.  Module
also provides methods to retrieve the directory (or directories)
for an obsid.</p>
<p>This uses the obsid_archive module with a configuration specific
to the aspect L1 products.</p>
<div class="section" id="id1">
<h2>Functions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.archive.asp_l1.get_files">
<code class="sig-prename descclassname">mica.archive.asp_l1.</code><code class="sig-name descname">get_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revision</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">content</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/asp_l1.html#get_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.asp_l1.get_files" title="Permalink to this definition">¶</a></dt>
<dd><p>List asp_l1 files for an obsid or a time range.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">asp_l1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs_files</span> <span class="o">=</span> <span class="n">asp_l1</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="mi">6000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs_gspr</span> <span class="o">=</span> <span class="n">asp_l1</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="mi">6000</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GSPROPS&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">range_fidpr</span> <span class="o">=</span> <span class="n">asp_l1</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2012:001&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">stop</span><span class="o">=</span><span class="s1">&#39;2012:030&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FIDPROPS&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>start</strong> – time range start (Chandra.Time compatible)</p></li>
<li><p><strong>stop</strong> – time range stop (Chandra.Time compatible)</p></li>
<li><p><strong>revision</strong> – revision integer or ‘last’
defaults to current released version</p></li>
<li><p><strong>content</strong> – archive CONTENT type
defaults to all available ASP1 types</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>full path of files matching query</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.asp_l1.get_dir">
<code class="sig-prename descclassname">mica.archive.asp_l1.</code><code class="sig-name descname">get_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/asp_l1.html#get_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.asp_l1.get_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ASP L1 directory for default/released products for an obsid.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">asp_l1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asp_l1</span><span class="o">.</span><span class="n">get_dir</span><span class="p">(</span><span class="mi">2121</span><span class="p">)</span>
<span class="go">&#39;/proj/sot/ska/data/mica/archive/asp1/02/02121&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsid</strong> – obsid</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>directory</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.asp_l1.get_obs_dirs">
<code class="sig-prename descclassname">mica.archive.asp_l1.</code><code class="sig-name descname">get_obs_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/asp_l1.html#get_obs_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.asp_l1.get_obs_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all ASP L1 directories for an obsid in the Ska file archive.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">asp_l1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obsdirs</span> <span class="o">=</span> <span class="n">asp_l1</span><span class="o">.</span><span class="n">get_obs_dirs</span><span class="p">(</span><span class="mi">6000</span><span class="p">)</span>
</pre></div>
</div>
<p>obsdirs will look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/asp1/06/06000&#39;</span><span class="p">,</span>
<span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/asp1/06/06000_v02&#39;</span><span class="p">,</span>
<span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/asp1/06/06000_v03&#39;</span><span class="p">,</span>
<span class="s1">&#39;last&#39;</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/asp1/06/06000&#39;</span><span class="p">,</span>
<span class="s1">&#39;revisions&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsid</strong> – obsid</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>map of obsid version to directories</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.asp_l1.get_atts">
<code class="sig-prename descclassname">mica.archive.asp_l1.</code><code class="sig-name descname">get_atts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">revision</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filter</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/asp_l1.html#get_atts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.asp_l1.get_atts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ground aspect solution quaternions and times covering obsid or start to stop,
in the ACA frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Obsid</dt>
<dd class="field-odd"><p>obsid</p>
</dd>
<dt class="field-even">Start</dt>
<dd class="field-even"><p>start time (DateTime compat)</p>
</dd>
<dt class="field-odd">Stop</dt>
<dd class="field-odd"><p>stop time (DateTime compat)</p>
</dd>
<dt class="field-even">Revision</dt>
<dd class="field-even"><p>aspect pipeline processing revision (integer version, None, or ‘last’)</p>
</dd>
<dt class="field-odd">Filter</dt>
<dd class="field-odd"><p>boolean, true means returned values will not include quaternions during times when asp_sol_status is non-zero</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nx4 np.array of quaternions, np.array of N times, list of dict with header from each asol file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.asp_l1.get_atts_from_files">
<code class="sig-prename descclassname">mica.archive.asp_l1.</code><code class="sig-name descname">get_atts_from_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">asol_files</span></em>, <em class="sig-param"><span class="n">acal_files</span></em>, <em class="sig-param"><span class="n">aqual_files</span></em>, <em class="sig-param"><span class="n">filter</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/asp_l1.html#get_atts_from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.asp_l1.get_atts_from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>From ASP1 source files (asol, acal, aqual) get the ground aspect solution quaternions and times covering
the range of asol_files in the ACA frame.  The asol, acl, and aqual files are assumed to have one-to-one correspondence
(though the asol to acal times are checked).</p>
<dl class="field-list simple">
<dt class="field-odd">Asol_files</dt>
<dd class="field-odd"><p>list of aspect asol1 files</p>
</dd>
<dt class="field-even">Acal_files</dt>
<dd class="field-even"><p>list of acal1 files associated with asol_files</p>
</dd>
<dt class="field-odd">Aqual_files</dt>
<dd class="field-odd"><p>list of aqual files associated with asol_files</p>
</dd>
<dt class="field-even">Filter</dt>
<dd class="field-even"><p>boolean, true means returned values will not include quaternions during times when asp_sol_status is non-zero</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Nx4 np.array of quaternions, np.array of N times, list of dict with header from each asol file.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="mica-archive-obsid-archive">
<h1><a class="reference internal" href="#module-mica.archive.obsid_archive" title="mica.archive.obsid_archive"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.obsid_archive</span></code></a><a class="headerlink" href="#mica-archive-obsid-archive" title="Permalink to this headline">¶</a></h1>
<p>Base Class used in mica.archive.asp_l1 and mica.archive.obspar</p>
<span class="target" id="module-mica.archive.obsid_archive"></span><p>Generalized module for fetching and archiving obsid-organized
telemetry such as asp_l1 and obspar products.</p>
<dl class="py class">
<dt id="mica.archive.obsid_archive.ObsArchive">
<em class="property">class </em><code class="sig-prename descclassname">mica.archive.obsid_archive.</code><code class="sig-name descname">ObsArchive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive" title="Permalink to this definition">¶</a></dt>
<dd><p>Object to store configuration, logging, and processing tasks
to fetch obsid telemetry from the CXC archive and store in a Ska
file archive, while logging the archive files to a file lookup
database.</p>
<p>The configuration dictionary <code class="docutils literal notranslate"><span class="pre">config</span></code> may have these key/values:</p>
<ul class="simple">
<li><dl class="simple">
<dt>data_root: directory for products</dt><dd><p>(example /proj/sot/ska/data/mica/archive/asp1)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>temp_root: directory for temporary storage of fetched</dt><dd><p>telemetry</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>bad_obsids: file containing list of obsids that should be</dt><dd><p>ignored when in regular update mode</p>
</dd>
</dl>
</li>
<li><p>cols: headers that will be included in file lookup table</p></li>
<li><p>sql_def: sql file to build file lookup archfiles table</p></li>
<li><dl class="simple">
<dt>apstat_table: axafapstat database table from which to find</dt><dd><p>new processing (by id)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>apstat_id: field in apstat_table to use as unique CXCDS</dt><dd><p>processing id</p>
</dd>
</dl>
</li>
<li><p>label: label of product type for log messages</p></li>
<li><dl class="simple">
<dt>small: arc5gl keyword/filetype for small file from products</dt><dd><p>(example asp1{fidprops}).  This will be retrieved with
“get %s” % config[‘small’] and the retrieved files will
be used to determine product version.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>small_glob: glob to match files retrieved by</dt><dd><p>“get %s” % config[small]
(example ‘<em>fidpr</em>’)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>small_ver_regex: regular expression to search for version from</dt><dd><p>retrieved files (example ‘pcadfd+N(d{3})_’)</p>
</dd>
</dl>
</li>
<li><p>full: arc5gl keyword for products (example ‘asp1’)</p></li>
<li><dl class="simple">
<dt>rebuild: If True/set, allow update mode to rebuild the database</dt><dd><p>from obsid 1.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – configuration dictionary</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ObsArchive instance</p>
</dd>
</dl>
<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_all_obspar_info">
<code class="sig-name descname">get_all_obspar_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">archfiles</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_all_obspar_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_all_obspar_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Read obspar and add ‘obsid’ and ‘filename’ keys to the dictionary
i and archfiles are just passed to make the logging prettier.</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_arch">
<code class="sig-name descname">get_arch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'last'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_arch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_arch" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve telemetry for an observation from the CXC archive and
store in the Ska file archive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – ‘default’, ‘last’, or revision/version number</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>obsid directory in Ska file archive</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>directory string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_arch_info">
<code class="sig-name descname">get_arch_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">archfiles</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_arch_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_arch_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get information for a file for the file lookup table/database.
For obspars, call the get_obspar_info() method.
For FITS files, call get_fits_info() method.</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_dir">
<code class="sig-name descname">get_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the latest released directory for an obsid
Return None if there are no ‘default’ / released products.</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_file_ver">
<em class="property">static </em><code class="sig-name descname">get_file_ver</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tempdir</span></em>, <em class="sig-param"><span class="n">fileglob</span></em>, <em class="sig-param"><span class="n">ver_regex</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_file_ver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_file_ver" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the version/revision of a set of archived files from
their file names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tempdir</strong> – directory containing files</p></li>
<li><p><strong>fileglob</strong> – glob to match files in question</p></li>
<li><p><strong>ver_regex</strong> – regular expression to pull out version
from the set of files</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>version number</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_fits_info">
<code class="sig-name descname">get_fits_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">archfiles</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_fits_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_fits_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Read FITS file <code class="docutils literal notranslate"><span class="pre">f</span></code> with index <code class="docutils literal notranslate"><span class="pre">i</span></code> (position within list of
filenames <code class="docutils literal notranslate"><span class="pre">archfiles</span></code>) and get dictionary of values to store
in file lookup database.  This values include all header key/value
pairs with keys in <code class="docutils literal notranslate"><span class="pre">config[cols]</span></code> plus the header checksum,
the filename, the year, and day-of-year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – index of file f within list of files archfiles</p></li>
<li><p><strong>f</strong> – filename</p></li>
<li><p><strong>archfiles</strong> – list of filenames for this batch</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>info for a file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_obs_dirs">
<code class="sig-name descname">get_obs_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_obs_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_obs_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of the directories available for an obsid.
This is just done with a glob in the data directories.</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_obspar_info">
<code class="sig-name descname">get_obspar_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">archfiles</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_obspar_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_obspar_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap get_all_obspar_info() and just include columns in config[‘cols’]</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_todo_from_links">
<code class="sig-name descname">get_todo_from_links</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">archive_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_todo_from_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_todo_from_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all of the *_last directories in the file archive
(and specify revision=default to attempt to get new released products
for them).</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.get_ver_num">
<code class="sig-name descname">get_ver_num</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'default'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.get_ver_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.get_ver_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the version number associated with the current released
products or with the products referenced by “version=last”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – version string (‘default’|’last’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>version</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.set_env">
<code class="sig-name descname">set_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.set_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.set_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Set environment included an arc5gl handle and
and a handle to the axafapstat database</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.set_read_env">
<code class="sig-name descname">set_read_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.set_read_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.set_read_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Set environment included an arc5gl handle and
and a handle to the axafapstat database</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the update process using the config already passed to the object.</p>
</dd></dl>

<dl class="py method">
<dt id="mica.archive.obsid_archive.ObsArchive.update_link">
<code class="sig-name descname">update_link</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obsid_archive.html#ObsArchive.update_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obsid_archive.ObsArchive.update_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create links in the obsid data directories to make it easy to find
the current ‘default’/released data, all versions that have been
archived, and the ‘last’/unreleased/provisional data if available.</p>
<p>This is designed so that if obsid 5 has released data in version 1
and provisional data in version 2, that the directories and links
will look like:</p>
<p>directory 00005_v01
directory 00005_v02
link      00005 -&gt; 00005_v01
link      00005_last -&gt; 00005_v02</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mica.archive.obspar">
<span id="mica-archive-obspar"></span><h1><a class="reference internal" href="#module-mica.archive.obspar" title="mica.archive.obspar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.obspar</span></code></a><a class="headerlink" href="#module-mica.archive.obspar" title="Permalink to this headline">¶</a></h1>
<p>Script to update Ska file archive obspars.  Module
also provides methods to retrieve the directory (or directories)
for an obsid.</p>
<p>This uses the obsid_archive module with a configuration specific
to the obspar products.</p>
<div class="section" id="id2">
<h2>Functions<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.archive.obspar.get_dir">
<code class="sig-prename descclassname">mica.archive.obspar.</code><code class="sig-name descname">get_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obspar.html#get_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obspar.get_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get obspar directory for default/released products for an obsid.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">obspar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obspar</span><span class="o">.</span><span class="n">get_dir</span><span class="p">(</span><span class="mi">2121</span><span class="p">)</span>
<span class="go">&#39;/proj/sot/ska/data/mica/archive/obspar/02/02121&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsid</strong> – obsid</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>directory</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.obspar.get_obs_dirs">
<code class="sig-prename descclassname">mica.archive.obspar.</code><code class="sig-name descname">get_obs_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obspar.html#get_obs_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obspar.get_obs_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all obspar directories for an obsid in the Ska file archive.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">obspar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obsdirs</span> <span class="o">=</span> <span class="n">obspar</span><span class="o">.</span><span class="n">get_obs_dirs</span><span class="p">(</span><span class="mi">6000</span><span class="p">)</span>
</pre></div>
</div>
<p>obsdirs will look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/obspar/06/06000&#39;</span><span class="p">,</span>
<span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/obspar/06/06000_v02&#39;</span><span class="p">,</span>
<span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/obspar/06/06000_v03&#39;</span><span class="p">,</span>
<span class="s1">&#39;last&#39;</span><span class="p">:</span> <span class="s1">&#39;/proj/sot/ska/data/mica/archive/obspar/06/06000&#39;</span><span class="p">,</span>
<span class="s1">&#39;revisions&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obsid</strong> – obsid</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>map of obsid version to directories</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.archive.obspar.get_obspar">
<code class="sig-prename descclassname">mica.archive.obspar.</code><code class="sig-name descname">get_obspar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'default'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/archive/obspar.html#get_obspar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.archive.obspar.get_obspar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the obspar for obsid.  Return as a dict.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mica.archive</span> <span class="kn">import</span> <span class="n">obspar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obspar</span><span class="o">.</span><span class="n">get_obspar</span><span class="p">(</span><span class="mi">7001</span><span class="p">)[</span><span class="s1">&#39;detector&#39;</span><span class="p">]</span>
<span class="go">&#39;ACIS-I&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – processing version/revision</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of obspar</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.vv">
<span id="mica-vv"></span><h1><a class="reference internal" href="#module-mica.vv" title="mica.vv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.vv</span></code></a><a class="headerlink" href="#module-mica.vv" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id3">
<h2>Functions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.vv.get_vv">
<code class="sig-prename descclassname">mica.vv.</code><code class="sig-name descname">get_vv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'default'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/vv/vv.html#get_vv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.vv.get_vv" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve V&amp;V data for an obsid/version.
This reads the saved JSON and returns the previously-
calculated V&amp;V data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – ‘last’, ‘default’, or version number</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of V&amp;V data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.vv.get_vv_dir">
<code class="sig-prename descclassname">mica.vv.</code><code class="sig-name descname">get_vv_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'default'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/vv/vv.html#get_vv_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.vv.get_vv_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get directory containing V&amp;V products for a requested obsid/version,
including plots and json.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – ‘last’, ‘default’ or version number</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>directory name for obsid/version</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.vv.get_vv_files">
<code class="sig-prename descclassname">mica.vv.</code><code class="sig-name descname">get_vv_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'default'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/vv/vv.html#get_vv_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.vv.get_vv_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of V&amp;V files available for a requested obsid/version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – ‘default’, ‘last’ or version number</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.vv.get_rms_data">
<code class="sig-prename descclassname">mica.vv.</code><code class="sig-name descname">get_rms_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/vv/vv.html#get_rms_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.vv.get_rms_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve/return all data from RMS trending H5 archive</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>numpy array of RMS data for each star/obsid/version</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.vv.get_arch_vv">
<code class="sig-prename descclassname">mica.vv.</code><code class="sig-name descname">get_arch_vv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">version</span><span class="o">=</span><span class="default_value">'last'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/vv/process.html#get_arch_vv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.vv.get_arch_vv" title="Permalink to this definition">¶</a></dt>
<dd><p>Given obsid and version, find archived ASP1 and obspar products and
run V&amp;V.  Effort is made to find the obspar that was actually used during
creation of the ASP1 products.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>version</strong> – ‘last’, ‘default’, or revision number of ASP1 products</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>mica.vv.Obi V&amp;V object</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.utils">
<span id="mica-utils"></span><h1><a class="reference internal" href="#module-mica.utils" title="mica.utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.utils</span></code></a><a class="headerlink" href="#module-mica.utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id4">
<h2>Functions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.utils.get_timeline_at_date">
<code class="sig-prename descclassname">mica.utils.</code><code class="sig-name descname">get_timeline_at_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">timelines_db</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/utils.html#get_timeline_at_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.utils.get_timeline_at_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return timeline that contains a given date.  The ‘timeline_loads’ query is used
to give the mp_dir as well as datestart and datestop for the timeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – Chandra.Time compatible date</p></li>
<li><p><strong>timelines_db</strong> – optional already-open handle to a cmd_states/timelines database.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of appropriate record from timeline_loads table</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.starcheck">
<span id="mica-starcheck"></span><h1><a class="reference internal" href="#module-mica.starcheck" title="mica.starcheck"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.starcheck</span></code></a><a class="headerlink" href="#module-mica.starcheck" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id5">
<h2>Functions<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.starcheck.get_starcheck_catalog">
<code class="sig-prename descclassname">mica.starcheck.</code><code class="sig-name descname">get_starcheck_catalog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">mp_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">starcheck_db</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timelines_db</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/starcheck/starcheck.html#get_starcheck_catalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.starcheck.get_starcheck_catalog" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given obsid, return a dictionary describing the starcheck catalog that should apply.
The content of that dictionary is from the database tables of that parsed the starcheck report
and has keys:</p>
<ul class="simple">
<li><p>cat: catalog rows as astropy.table</p></li>
<li><p>manvr: list of maneuvers to this attitude</p></li>
<li><p>pred_temp: predicted ACA CCD temperature</p></li>
<li><p>warnings: list of warnings below catalog in starcheck output</p></li>
<li><p>obs: dictionary of observation target and pointing information</p></li>
<li><p>mp_dir: directory with products that are the source of this catalog data</p></li>
<li><p>status: string describing status of that observation, described below.</p></li>
</ul>
<p>Status:</p>
<ul class="simple">
<li><p>ran: observation was observed</p></li>
<li><p>planned: observation in a not-approved future schedule</p></li>
<li><p>approved: observation in an approved future schedule (ingested in timelines/cmd_states)</p></li>
<li><p>ran_pretimelines: ran, but before timelines database starts</p></li>
<li><p>timelines_gap: after timelines database start but missing data</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>mp_dir</strong> – optional load specifier like ‘FEB1317A’ or ‘/2017/FEB1317/oflsa/’.
By default the as-run loads (via <code class="docutils literal notranslate"><span class="pre">get_mp_dir()</span></code>) are used.</p></li>
<li><p><strong>starcheck_db</strong> – optional handle to already-open starcheck database</p></li>
<li><p><strong>timelines_db</strong> – optional handle to already-open timelines database</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with starcheck content described above</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.starcheck.get_starcheck_catalog_at_date">
<code class="sig-prename descclassname">mica.starcheck.</code><code class="sig-name descname">get_starcheck_catalog_at_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">starcheck_db</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timelines_db</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/starcheck/starcheck.html#get_starcheck_catalog_at_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.starcheck.get_starcheck_catalog_at_date" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given date, return a dictionary describing the starcheck catalog that should apply.
The content of that dictionary is from the database tables that parsed the starcheck report.
A catalog is defined as applying, in this function, to any time from the end of the
previous dwell through the end of the dwell in which the catalog was used.</p>
<p>Star catalog dictionary with keys:</p>
<ul class="simple">
<li><p>cat: catalog rows as astropy.table</p></li>
<li><p>manvr: list of maneuvers to this attitude</p></li>
<li><p>pred_temp: predicted ACA CCD temperature</p></li>
<li><p>warnings: list of warnings below catalog in starcheck output</p></li>
<li><p>obs: dictionary of observation target and pointing information</p></li>
<li><p>mp_dir: directory with products that are the source of this catalog data</p></li>
<li><p>status: string describing status of that observation, described below.</p></li>
</ul>
<p>Status:</p>
<ul class="simple">
<li><p>ran: observation was observed</p></li>
<li><p>planned: observation in a not-approved future schedule</p></li>
<li><p>approved: observation in an approved future schedule (ingested in timelines/cmd_states)</p></li>
<li><p>ran_pretimelines: ran, but before timelines database starts</p></li>
<li><p>timelines_gap: after timelines database start but missing data</p></li>
<li><p>no starcat: in the database but has no star catalog</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – Chandra.Time compatible date</p></li>
<li><p><strong>starcheck_db</strong> – optional handle to already-open starcheck database</p></li>
<li><p><strong>timelines_db</strong> – optional handle to already-open timelines database</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with starcheck content described above</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.starcheck.get_mp_dir">
<code class="sig-prename descclassname">mica.starcheck.</code><code class="sig-name descname">get_mp_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obsid</span></em>, <em class="sig-param"><span class="n">starcheck_db</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timelines_db</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/starcheck/starcheck.html#get_mp_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.starcheck.get_mp_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mission planning directory for an obsid and some status information.  If the obsid catalog was
used more than once (multi-obi or rescheduled after being used in a vehicle-only interval), return the
directory and details of the last one used on the spacecraft.</p>
<p>The returned directory describes the directory that was used for the products with this star catalog.
The returned status has possible values:</p>
<ul class="simple">
<li><p>ran: observation was observed</p></li>
<li><p>planned: observation in a not-approved future schedule</p></li>
<li><p>approved: observation in an approved future schedule (ingested in timelines/cmd_states)</p></li>
<li><p>ran_pretimelines: ran, but before timelines database starts</p></li>
<li><p>timelines_gap: after timelines database start but missing data</p></li>
<li><p>no starcat: in the database but has no star catalog</p></li>
</ul>
<p>The return ‘date’ is the date/time of the <cite>MP_STARCAT</cite> time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obsid</strong> – obsid</p></li>
<li><p><strong>starcheck_db</strong> – optional handle to already-open starcheck database</p></li>
<li><p><strong>timelines_db</strong> – optional handle to already-open timelines database</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>directory, status, date .   Described above.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mica.starcheck.get_monitor_windows">
<code class="sig-prename descclassname">mica.starcheck.</code><code class="sig-name descname">get_monitor_windows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_obsid</span><span class="o">=</span><span class="default_value">40000</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/starcheck/starcheck.html#get_monitor_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.starcheck.get_monitor_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the database of starcheck products to get a list of monitor windows
This list is filtered by timelines content to only include catalogs that should have or will run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – Optional start time for filtering windows as fetched from the database</p></li>
<li><p><strong>stop</strong> – Optional stop time for filtering windows as fetched from the database</p></li>
<li><p><strong>min_obsid</strong> – Minimum obsid value for filtering.  Default of 40000 is intended to fetch only ERs</p></li>
<li><p><strong>config</strong> – config dictionary. If supplied must include ‘starcheck_db’ and ‘timelines_db’ keys
with dictionaries of the required arguments to Ska.DBI to connect to those databases.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>astropy Table of monitor windows.  See get_starcheck_catalog_at_date for description of the values
of the ‘status’ column.  The ‘catalog’ column contains the get_starcheck_catalog_at_date
returned dictionary.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.stats.acq_stats">
<span id="mica-stats-acq-stats"></span><h1><a class="reference internal" href="#module-mica.stats.acq_stats" title="mica.stats.acq_stats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.stats.acq_stats</span></code></a><a class="headerlink" href="#module-mica.stats.acq_stats" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id6">
<h2>Functions<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.stats.acq_stats.get_stats">
<code class="sig-prename descclassname">mica.stats.acq_stats.</code><code class="sig-name descname">get_stats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/stats/acq_stats.html#get_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.stats.acq_stats.get_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve numpy array of acq stats</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filter</strong> – True filters out ‘known_bad’ rows from the table</p>
</dd>
<dt class="field-even">Returns acq_stats</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-mica.stats.guide_stats">
<span id="mica-stats-guide-stats"></span><h1><a class="reference internal" href="#module-mica.stats.guide_stats" title="mica.stats.guide_stats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.stats.guide_stats</span></code></a><a class="headerlink" href="#module-mica.stats.guide_stats" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id7">
<h2>Functions<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mica.stats.guide_stats.get_stats">
<code class="sig-prename descclassname">mica.stats.guide_stats.</code><code class="sig-name descname">get_stats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mica/stats/guide_stats.html#get_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mica.stats.guide_stats.get_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve numpy array of guide stats</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filter</strong> – True filters out ‘known_bad’ rows from the table</p>
</dd>
<dt class="field-even">Returns gui_stats</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_dark</span></code></a><ul>
<li><a class="reference internal" href="#module-mica.archive.aca_dark.dark_cal"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_dark.dark_cal</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.archive.aca_hdr3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_hdr3</span></code></a></li>
<li><a class="reference internal" href="#module-mica.archive.aca_l0"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.aca_l0</span></code></a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.archive.asp_l1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.asp_l1</span></code></a><ul>
<li><a class="reference internal" href="#id1">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mica-archive-obsid-archive"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.obsid_archive</span></code></a></li>
<li><a class="reference internal" href="#module-mica.archive.obspar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.archive.obspar</span></code></a><ul>
<li><a class="reference internal" href="#id2">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.vv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.vv</span></code></a><ul>
<li><a class="reference internal" href="#id3">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.utils</span></code></a><ul>
<li><a class="reference internal" href="#id4">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.starcheck"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.starcheck</span></code></a><ul>
<li><a class="reference internal" href="#id5">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.stats.acq_stats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.stats.acq_stats</span></code></a><ul>
<li><a class="reference internal" href="#id6">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mica.stats.guide_stats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mica.stats.guide_stats</span></code></a><ul>
<li><a class="reference internal" href="#id7">Functions</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="starcheck.html"
                        title="previous chapter">Starcheck products</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="_sources/api.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2012, Jean Connelly.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.1.2. &nbsp;
  </p>
</footer>
  </body>
</html>